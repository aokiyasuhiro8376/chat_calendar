<h1><%= @room.name %></h1>

<h1>Chat room</h1>
<h4>参加者</h4>
<% @entries.each do |e| %>
  <!-- eachで回したentryユーザーがログインユーザーであれば、@classに"current_user"の文字列を代入する。ログインユーザーであれば、空白を代入する -->
  <% current_user == e.user ? @class = "current_user" : @class = ""  %>
  <!-- eachで回したentryユーザーがログインユーザーでなければ、entryユーザー名を表示する -->
    <% if e.user != current_user %>
      <h5 class="text-left <%= @class %>" id="<%= @class %>" data-id="<%= e.user.id %>"><%= link_to "@#{e.user.name}", user_path(e.user_id) %></h5>
    <% else %>
      <h5 class="text-left <%= @class %>" id="<%= @class %>" data-id="<%= e.user.id %>"></h5>
    <% end %>
<% end %>
<!-- メッセージ内容は、パーシャルにします -->
<div id="direct_messages" data-room_id="<%= @room.id %>">
  <%= render @direct_messages %>
</div>
<!-- メッセージフォーム -->
<%= form_for @direct_messages, url: rooms_path do |f| %>
  <%= f.label :content %>
  <%= f.text_field :content, placeholder: "メッセージを入力して下さい", size: 70 %>
  <%= f.hidden_field :room_id, value: @room.id %>
  <%= f.submit "投稿する" %>
<% end %>

<%= link_to "ユーザー一覧に戻る", users_path %>
