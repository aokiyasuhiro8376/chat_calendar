<%= render 'shared/header' %>

<h1><%= @room.name %></h1>

<h4>参加者</h4>
<% @entries.each do |e| %>
  <!-- eachで回したentryユーザーがログインユーザーであれば、@classに"current_user"の文字列を代入する。ログインユーザーであれば、空白を代入する -->
  <% current_user == e.user ? @class = "current_user" : @class = ""  %>
  <!-- eachで回したentryユーザーがログインユーザーでなければ、entryユーザー名を表示する -->
    <% if e.user != current_user %>
      <h5 class="text-left <%= @class %>" id="<%= @class %>" data-id="<%= e.user.id %>"><%= link_to "@#{e.user.name}", user_path(e.user_id) %></h5>
    <% else %>
      <h5 class="text-left <%= @class %>" id="<%= @class %>" data-id="<%= e.user.id %>"></h5>
    <% end %>
<% end %>

<!-- メッセージ内容は、パーシャルにします -->
<div id="direct_messages" data-room_id="<%= @room.id %>">
  <%= render @direct_messages %>
</div>

<%# <!-- メッセージフォーム 1-->
<form>
  <label style="color: white;" id="target">新しいメッセージを作成</label><br>
  <input type="string" id="chat-input" data-behavior="room_speaker" class="form-control">
</form> %>

<!-- メッセージフォーム 2-->
<%= form_for @direct_messages do |f| %>
  <%= f.text_field :content, :placeholder => "メッセージを入力して下さい" , :size => 70 %>
  <%= f.hidden_field :room_id, :value => @room.id %>
  <br>
  <%= f.submit "投稿する" %>
<% end %>

<%= link_to "ユーザー一覧に戻る", users_path %>
